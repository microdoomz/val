<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Awwdhiee Will You Be My Valentine? ðŸ’–</title>
  <style>
    * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }

    body {
      margin: 0; height: 100vh; overflow: hidden;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      display: flex; align-items: center; justify-content: center;
    }

    .container {
      position: relative; z-index: 2; text-align: center;
      background: rgba(255,255,255,0.85);
      padding: 40px 30px; border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      max-width: 90%; transition: transform .4s ease, opacity .4s ease;
    }

    h1 { margin-top: 0; color: #e63946; font-size: 2.2rem; }

    .buttons { margin-top: 30px; display: flex; gap: 40px; justify-content: center; }

    button {
      border: none; border-radius: 999px; padding: 14px 32px;
      font-size: 1.1rem; cursor: pointer; transition: transform .3s ease;
    }

    #yesBtn { background: #ff4d6d; color: #fff; z-index: 10; }
    #yesBtn:hover { transform: scale(1.1); box-shadow: 0 10px 25px rgba(255,77,109,.4); }

    #noBtn {
      background: #adb5bd; color: #333; position: relative; z-index: 5;
      transition: left 1.4s cubic-bezier(.25,.8,.25,1), top 1.4s cubic-bezier(.25,.8,.25,1);
    }

    .result { display: none; text-align: center; animation: popIn .8s ease forwards; }

    .result img {
      max-width: 620px; width: 92vw; border-radius: 26px; margin-bottom: 26px;
    }

    @keyframes popIn { from { transform: scale(.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    /* Heart-shaped confetti */
    .confetti {
      position: fixed; width: 14px; height: 14px; pointer-events: none;
      transform: rotate(45deg);
    }
    .confetti::before, .confetti::after {
      content: ''; position: absolute; width: 14px; height: 14px; border-radius: 50%; background: inherit;
    }
    .confetti::before { left: -7px; top: 0; }
    .confetti::after  { top: -7px; left: 0; }
  </style>
</head>
<body>

  <div class="container" id="card">
    <h1>Will you be my Valentine? ðŸ’˜</h1>
    <div class="buttons">
      <button id="yesBtn">Yes ðŸ’–</button>
      <button id="noBtn">No ðŸ˜’</button>
    </div>
  </div>

  <div class="result" id="result">
    <img id="finalGif" src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" alt="Cute cat kissing GIF" />
    <h2>YAY!! ðŸ’•ðŸ¥°</h2>
    <p>Hit me up on insta hawwtyy ðŸ˜˜</p>
  </div>

  <script>
    /* ------------------ AUDIO (ROBUST) ------------------ */
    const hoverSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-cartoon-woosh-616.mp3');
    const yesSound   = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3');
    hoverSound.preload = 'auto'; yesSound.preload = 'auto';
    hoverSound.volume = 0.6; yesSound.volume = 0.8;

    // Explicit audio unlock on first real gesture
    function unlockAudioOnce() {
      const p1 = hoverSound.play().then(() => hoverSound.pause()).catch(() => {});
      const p2 = yesSound.play().then(() => yesSound.pause()).catch(() => {});
      Promise.all([p1, p2]).finally(() => {
        document.removeEventListener('pointerdown', unlockAudioOnce);
      });
    }
    document.addEventListener('pointerdown', unlockAudioOnce, { once: true });

    /* ------------------ ELEMENTS ------------------ */
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const card = document.getElementById('card');
    const result = document.getElementById('result');
    const finalGif = document.getElementById('finalGif');

    let noCount = 0; let noIsFloating = false;

    /* ------------------ FUNNY TEXTS (NO REPEATS) ------------------ */
    const ALL_TEXTS = [
      'Really? ðŸ˜¢','Pleaseeee ðŸ¥ºðŸ™','Have a heart ðŸ’”','Don\'t do this ðŸ˜­','Think again ðŸ˜',
      'That\'s illegal ðŸ˜¤ðŸš¨','I\'m sad now ðŸ¥¹','Come onnn ðŸ˜©ðŸ’˜','You wouldn\'t ðŸ˜³',
      'Error 404: NO not found ðŸ¤–','My mom said yes ðŸ˜Œ','I already bought chocolates ðŸ«',
      'Heart.exe stopped ðŸ’¥','Be nice pls ðŸ¥°','Last chance ðŸ‘€ðŸ’ž','Say yes or else ðŸ˜ˆ (jk)',
      'This button is broken ðŸ˜œ','My dog said YES ðŸ¶','The universe ships us âœ¨',
      'Plot twist: YES is destiny ðŸ§¿','Certified heartbreaker ðŸ’”','Rom-com rules say YES ðŸŽ¬'
    ];
    let textBag = [];
    function nextFunnyText() {
      if (textBag.length === 0) {
        textBag = ALL_TEXTS.slice().sort(() => Math.random() - 0.5);
      }
      return textBag.pop();
    }

    /* ------------------ NO BUTTON MOVE ------------------ */
    function moveNoButton(ev) {
      if (!noIsFloating) {
        const r = noBtn.getBoundingClientRect();
        noBtn.style.position = 'fixed';
        noBtn.style.left = r.left + 'px';
        noBtn.style.top = r.top + 'px';
        noIsFloating = true;
      }

      noCount++;

      const yesRect = yesBtn.getBoundingClientRect();
      const noRect = noBtn.getBoundingClientRect();
      const padding = 10; const safe = 80;
      const minDist = 220; // keep FAR from cursor
      const cx = ev?.clientX ?? window.innerWidth / 2;
      const cy = ev?.clientY ?? window.innerHeight / 2;

      let x, y, attempts = 0;
      do {
        x = Math.random() * (window.innerWidth - noRect.width - padding * 2) + padding;
        y = Math.random() * (window.innerHeight - noRect.height - padding * 2) + padding;
        const dx = (x + noRect.width/2) - cx;
        const dy = (y + noRect.height/2) - cy;
        const farFromCursor = Math.hypot(dx, dy) >= minDist;
        const awayFromYes = !(
          x < yesRect.right + safe &&
          x + noRect.width > yesRect.left - safe &&
          y < yesRect.bottom + safe &&
          y + noRect.height > yesRect.top - safe
        );
        attempts++;
        if (farFromCursor && awayFromYes) break;
      } while (attempts < 80);

      hoverSound.currentTime = 0; hoverSound.play().catch(() => {});
      noBtn.style.left = x + 'px'; noBtn.style.top = y + 'px';
      noBtn.textContent = nextFunnyText();

      const scale = Math.min(1 + noCount * 0.08, 6);
      yesBtn.style.transform = `scale(${scale})`;

      if (scale >= 6) {
        yesBtn.style.position = 'fixed'; yesBtn.style.top = '0'; yesBtn.style.left = '0';
        yesBtn.style.width = '100vw'; yesBtn.style.height = '100vh'; yesBtn.style.borderRadius = '0';
        yesBtn.style.fontSize = '3rem'; yesBtn.style.transform = 'scale(1)';
        yesBtn.textContent = 'YES ðŸ’– YES ðŸ’– YES ðŸ’–';
      }
    }

    noBtn.addEventListener('mouseenter', moveNoButton);
    noBtn.addEventListener('touchstart', moveNoButton);

    /* ------------------ YES CLICK ------------------ */
    yesBtn.addEventListener('click', () => {
      yesSound.currentTime = 0; yesSound.play().catch(() => {});
      card.style.opacity = '0'; card.style.transform = 'scale(0.8)';

      setTimeout(() => {
        card.style.display = 'none';
        // Reset GIF to avoid freeze on some browsers
        const src = finalGif.src; finalGif.src = ''; finalGif.src = src;
        result.style.display = 'block';
        startConfettiBursts();
      }, 500);
    });

    /* ------------------ CONFETTI (HEARTS, FAST FALL) ------------------ */
    function startConfettiBursts() {
      let bursts = 0; const maxBursts = 6;
      const id = setInterval(() => {
        launchBurst(0); launchBurst(window.innerWidth);
        bursts++; if (bursts >= maxBursts) clearInterval(id);
      }, 350);
    }

    function launchBurst(startX) {
      for (let i = 0; i < 45; i++) {
        const c = document.createElement('div'); c.className = 'confetti';
        let x = startX; let y = -20;
        const angle = Math.random() * Math.PI * 0.6 + Math.PI * 0.2; // wider spread
        const speed = Math.random() * 14 + 14; // faster
        const vx = Math.cos(angle) * speed * (startX === 0 ? 1 : -1);
        let vy = Math.sin(angle) * speed;
        c.style.left = x + 'px'; c.style.top = y + 'px';
        c.style.backgroundColor = `hsl(${Math.random() * 360}, 85%, 60%)`;
        document.body.appendChild(c);
        let life = 0; const gravity = 1.2; // faster fall
        const t = setInterval(() => {
          life++; x += vx; vy += gravity; y += vy;
          c.style.left = x + 'px'; c.style.top = y + 'px';
          if (y > window.innerHeight + 60 || life > 120) { clearInterval(t); c.remove(); }
        }, 16);
      }
    }
  </script>
</body>
</html>
